<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="description" content="í•˜ë£¨ë§ˆë‹¤ ì •í•´ì§€ëŠ” ìƒ‰ì„ ë‹¤ì–‘í•˜ê²Œ ì¦ê²¨ë³´ì„¸ìš”!">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style_index.css">
    <link rel="icon" href="icon.png" type="image/x-icon">
    <link rel="shortcut icon" href="icon.png" type="image/x-icon">

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5483486229407301"
     crossorigin="anonymous"></script>
    
    <title>RGBing(ì•Œì§€ë¹™)</title>
    <style>
       
    </style>
</head>
<body>
    <div class="option-box">
        <button id="music-toggle" class="music-button">ğŸ”•</button>
        <audio id="background-music" src="Strollin' - TrackTribe.mp3" loop></audio>
        <button id="share-toggle" class="music-button" onclick="shareContent()">ğŸ’Œ</button>
        <button id="clear-toggle" class="clear-button" onclick="showClear()">ğŸ‘€</button>
    </div>

    <div class="top-box">
        <h1>RGBing</h1>
        <p id="top-1" class="top-1"><b>í•˜ë£¨ë§ˆë‹¤ ì •í•´ì§€ëŠ” ìƒ‰ì„<br>ë‹¤ì–‘í•˜ê²Œ ì¦ê²¨ë³´ì„¸ìš”!</b></p>
    </div>

    <!--
    <div class="show-box">
        <div class="category">ğŸ ì´ë²¤íŠ¸</div>
        <div class="gamelist-box" onclick="goEvent()">
            <div class="title">2025 ì˜¬í•´ì˜ ìƒ‰ ë§ì¶”ê¸°</div>
            <div class="desc">2025ë…„ ì˜¬í•´ì˜ ìƒ‰ì„ ë§íˆê³  ì¹˜í‚¨ í•œ ë§ˆë¦¬ ë°›ì•„ ê°€ì!</div>
        </div>
    </div>
    -->

    <div class="show-box-2">
        <div id="color-box" class="color-box"></div>
        <div class="hash-big-box">
            <div id="date" class="date"></div>
            <div id="name" class="name"></div>
            <div id="desc4" class="desc4"></div>
            <div id="hash" class="hash"></div>
        </div>
    </div>

    <div class="show-box">
        <div class="category">ğŸ® ê²Œì„</div>
        <div class="gamelist-box" onclick="goRgbing()">
            <div class="title">ìƒ‰ ë§ì¶”ê¸°</div>
            <div class="desc">R, G, B ìˆ˜ì¹˜ë¥¼ ì¡°ì ˆí•˜ì—¬ ì˜¤ëŠ˜ì˜ ìƒ‰ì„ ë§ì¶°ë³´ì„¸ìš”!</div>
        </div>
        <div class="gamelist-box" onclick="goGradation()">
            <div class="title">ê·¸ë¼ë°ì´ì…˜</div>
            <div class="desc">ë¯¸ë¬˜í•œ ìƒ‰ì˜ ì°¨ì´ë¥¼ êµ¬ë¶„í•´ë³´ì„¸ìš”!</div>
            <div id="high1" class="high1">í˜„ì¬ì˜ 1ë“±ì€ ë‹˜ ì…ë‹ˆë‹¤.</div>
        </div>
        <div class="gamelist-box" onclick="goWhack()">
            <div class="title">ë‘ë”ì§€ ì¡ê¸°</div>
            <div class="desc">ì—¬ëŸ¬ë¶„ë“¤ì˜ ìˆœë°œë ¥ì„ ë°œíœ˜í•´ë³´ì„¸ìš”!</div>
            <div id="high2" class="high2">í˜„ì¬ì˜ 1ë“±ì€ ë‹˜ ì…ë‹ˆë‹¤.</div>
        </div>
    </div>

    <div class="show-box">
        <div class="category">ğŸ¨ ì˜¤ëŠ˜ì˜ ìƒ‰</div>
        <div class="gamelist-box" onclick="goDesc()">
            <div class="title">ì˜¤ëŠ˜ì˜ ìƒ‰ ì„¤ëª…</div>
            <div class="desc">ì˜¤ëŠ˜ì˜ ìƒ‰ê³¼ ê´€ë ¨ëœ ì •ë³´ë“¤ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</div>
        </div>
        <div class="gamelist-box" onclick="goMonth()">
            <div class="title">ê³¼ê±°ì˜ ìƒ‰ ê¸°ë¡</div>
            <div class="desc">ì´ë²ˆ í•œ ë‹¬ê°„ ì§€ì •ëœ ìƒ‰ë“¤ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.</div>
        </div>
        <div class="gamelist-box" onclick="goWallpaper()">
            <div class="title">ì˜¤ëŠ˜ì˜ ìƒ‰ ë°°ê²½í™”ë©´</div>
            <div class="desc">ì˜¤ëŠ˜ì˜ ìƒ‰ì„ í™œìš©í•œ ë°°ê²½í™”ë©´ì„ ì œê³µí•©ë‹ˆë‹¤.</div>
            <div class="desc">í™”ë©´ì„ ìº¡ì³í•œ ë’¤ ì›í•˜ëŠ” í¬ê¸°ë¡œ ìë¥¸ í›„ ì‚¬ìš©í•˜ë©´ ë©ë‹ˆë‹¤.</div>
        </div>
    </div>

    <div class="show-box">
        <div class="category">ğŸ“Œ ê¸°íƒ€ ë§í¬</div>
        <div class="gamelist-box" onclick="goInsta()">
            <div class="title">ì¸ìŠ¤íƒ€ê·¸ë¨</div>
            <div class="desc">@my_rgbing</div>
        </div>
        <div class="gamelist-box" onclick="goBlog()">
            <div class="title">ê³µì‹ ë¸”ë¡œê·¸</div>
            <div class="desc">ì—…ë°ì´íŠ¸ ë‚´ìš©ì´ ì˜¬ë¼ì˜µë‹ˆë‹¤.</div>
            <div class="desc">ì§ˆë¬¸ì´ë‚˜ í”¼ë“œë°±ì€ ì—¬ê¸°ì— ì•Œë ¤ì£¼ì„¸ìš”!</div>
        </div>
    </div>
<!--
    <div class="ad">
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5483486229407301"
     crossorigin="anonymous"></script>
        <ins class="adsbygoogle"
            style="display:block"
            data-ad-client="ca-pub-5483486229407301"
            data-ad-slot="1635124294"
            data-ad-format="auto"
            data-full-width-responsive="true"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
    </div>
-->

    <div class="update-box">
        <div id="updatedate" class="update-date">ìµœê·¼ ì—…ë°ì´íŠ¸: </div>
    </div>

    <script>
        let view;
        const today = new Date().toLocaleDateString("ko-KR", {
            year: "numeric",
            month: "2-digit",
            day: "2-digit",
            timeZone: "Asia/Seoul"
        }).replace(/\./g, "/").replace(/\s/g, "").replace(/\/$/, "");

        const musicToggleBtn = document.getElementById("music-toggle");
        const backgroundMusic = document.getElementById("background-music");

        musicToggleBtn.addEventListener("click", () => {
            if (backgroundMusic.paused) {
                backgroundMusic.play();
                musicToggleBtn.textContent = "ğŸ””";
                localStorage.setItem("audioStatus", "on");
            } else {
                backgroundMusic.pause();
                musicToggleBtn.textContent = "ğŸ”•";
                localStorage.setItem("audioStatus", "off");
            }
        });
        
        // Firebase ì´ˆê¸°í™”
        const firebaseConfig = {
            apiKey: "AIzaSyCyyqlzjApUgvJyysZKJIfY4lVz-lWmyEM",
            authDomain: "rgbing-3a593.firebaseapp.com",
            projectId: "rgbing-3a593",
            storageBucket: "rgbing-3a593.firebasestorage.app",
            messagingSenderId: "503895940241",
            appId: "1:503895940241:web:5e42593e93572563ac3330",
            measurementId: "G-RTREG5QN0D"
        };

        // Firebase ì•± ì´ˆê¸°í™”
        const app = firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        let redValue, greenValue, blueValue, desc1, desc2, desc3, desc4, cnt, name, hash;
        let high1, high2;

        function loadData() {
            // ì—…ë°ì´íŠ¸ ë‚ ì§œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
            const updateDataRef = database.ref('/update/date');
            updateDataRef.once('value', (snapshot) => {
                const dateData = snapshot.val();
                document.getElementById("updatedate").textContent = `ìµœê·¼ ì—…ë°ì´íŠ¸: ${dateData}`;
            });

            const colorDataRef = database.ref('/color_data/' + today);
            colorDataRef.once('value', (snapshot) => {
                // ë°ì´í„°ë¥¼ JSON ê°ì²´ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
                const colorData = snapshot.val();

                // ì›í•˜ëŠ” ê°’ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
                redValue = colorData.red;
                blueValue = colorData.blue;
                greenValue = colorData.green;
                desc4 = colorData.desc4;
                cnt = colorData.cnt;
                name = colorData.name;
                hash = colorData.hash;

                setColorOfTheDay();
            });

            const colorData2Ref = database.ref('/high_score/' + today);
            colorData2Ref.once('value', (snapshot) => {
                // ë°ì´í„°ë¥¼ JSON ê°ì²´ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
                const colorData = snapshot.val();

                // ì›í•˜ëŠ” ê°’ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
                high1 = colorData.name;

                setColorOfTheDay();
            });

            const colorData3Ref = database.ref('/high_score_2/' + today);
            colorData3Ref.once('value', (snapshot) => {
                // ë°ì´í„°ë¥¼ JSON ê°ì²´ë¡œ ê°€ì ¸ì˜µë‹ˆë‹¤.
                const colorData = snapshot.val();

                // ì›í•˜ëŠ” ê°’ì„ ì¶”ì¶œí•©ë‹ˆë‹¤.
                high2 = colorData.name;

                setColorOfTheDay();
            });

            // ì¡°íšŒìˆ˜ ë°ì´í„° ì¦ê°€ì‹œí‚¤ê¸°
            const viewRef = database.ref('/view/' + today);
            viewRef.transaction(
                function (currentData) {
                    if (currentData === null) {
                        return 1; // ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì´ˆê¸°ê°’ 1ë¡œ ì„¤ì •
                    }
                    return currentData + 1; // ê¸°ì¡´ ê°’ì— +1
                },
                function (error, committed, snapshot) {
                    if (error) {
                        console.log('Transaction failed: ' + error);
                    } else if (committed) {
                        console.log('Transaction committed successfully.');
                        const updatedView = snapshot.val();
                        view = updatedView;
                        viewUpdate();
                    }
                }
            );
        }

        function setColorOfTheDay() {
            const colorBox = document.getElementById("color-box");
            colorBox.style.backgroundColor = `rgb(${redValue}, ${greenValue}, ${blueValue})`; 

            // CSS ë³€ìˆ˜ë¡œ ì ìš©
            document.documentElement.style.setProperty('--random-color', `RGB(${redValue}, ${greenValue}, ${blueValue})`);

            document.getElementById("date").innerHTML = `${today} ì˜¤ëŠ˜ì˜ ìƒ‰`;
            document.getElementById("name").innerHTML = `${cnt}. ${name}`;
            document.getElementById("desc4").innerHTML = `${desc4}`;
            document.getElementById("hash").innerHTML = `${hash}`;

            document.getElementById("high1").innerHTML = `í˜„ì¬ì˜ 1ë“±ì€ <b>${high1}</b>ë‹˜ ì…ë‹ˆë‹¤.`;
            document.getElementById("high2").innerHTML = `í˜„ì¬ì˜ 1ë“±ì€ <b>${high2}</b>ë‹˜ ì…ë‹ˆë‹¤.`;
        }

        loadData();

        function viewUpdate() {
            document.getElementById("clear-toggle").textContent = `ğŸ‘€ ${view}`;
        }

        function goEvent() {
            window.location.href = 'event.html';
        }

        function goRgbing() {
            window.location.href = 'rgbing.html';
        }

        function goGradation() {
            window.location.href = 'gradation.html';
        }

        function goWhack() {
            window.location.href = 'whack.html';
        }

        function goDesc() {
            window.location.href = 'colorDesc.html';
        }

        function goMonth() {
            window.location.href = 'month.html';
        }

        function goWallpaper() {
            window.location.href = 'wallpaper.html';
        }

        function goInsta() {
            window.location.href = 'https://www.instagram.com/my_rgbing/profilecard/?igsh=MXI1ZDNqNjExNTJ4dQ==';
        }

        function goBlog() {
            window.location.href = 'https://rgbing.tistory.com/';
        }

        // ì„±ê³µ íšŸìˆ˜ ë²„íŠ¼ í´ë¦­ ì‹œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜
        function showClear() {
            alert(`${today}\nì˜¤ëŠ˜ì˜ ì¡°íšŒìˆ˜ëŠ” í˜„ì¬ê¹Œì§€ ${view}íšŒ ì…ë‹ˆë‹¤.`);
        }

        function shareContent() {
            if (navigator.share) {
                navigator.share({
                    title: 'ğŸ¨RGBing - ìƒ‰ ë§ì¶”ê¸° ê²Œì„ğŸ¨',
                    text: 'ì—¬ëŸ¬ë¶„ë“¤ì˜ ìƒ‰ê° ì„¼ìŠ¤ë¥¼ í™œìš©í•´ì„œ ì˜¤ëŠ˜ì˜ ìƒ‰ì„ ë§ì¶°ë³´ì„¸ìš”.',
                    url: window.location.href
                })
                .then(() => console.log('ê³µìœ  ì„±ê³µ'))
                .catch((error) => console.log('ê³µìœ  ì‹¤íŒ¨', error));
            } else {
                alert("ê³µìœ  ê¸°ëŠ¥ì„ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.");
            }
        }
    </script>

</body>
</html>
